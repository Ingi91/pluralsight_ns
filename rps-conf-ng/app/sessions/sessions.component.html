<RadSideDrawer #drawer [transition]="sideDrawerTransition" selectionBehavior="None">
	<StackLayout tkDrawerContent>

		<GridLayout rows="*, auto">
			<StackLayout style="background-color: #053140;">
				<Image src="res://logo" class="slide-out-img" stretch="none"></Image>

				<Button (tap)="selectView(0, 'My agenda')" [class]="selectedViewIndex === 0 ? 'slide-out-btn' : 'slide-out-btn-selected' "
					text="My agenda"></Button>
				<Button (tap)="selectView(1, 'All sessions')" [class]="selectedViewIndex === 1 ? 'slide-out-btn' : 'slide-out-btn-selected' "
					text="All session"></Button>
				<Button (tap)="selectView(2, 'Sponsors')" [class]="selectedViewIndex === 2 ? 'slide-out-btn' : 'slide-out-btn-selected' "
					text="Sponsors"></Button>

				<Button (tap)="goToAcknowledgementPage()" [class]="selectedViewIndex === 3 ? 'slide-out-btn' : 'slide-out-btn-selected' "
					text="Ackknowledgements"></Button>

			</StackLayout>
		</GridLayout>

	</StackLayout>
	<StackLayout tkMainContent>

		<AbsoluteLayout class="main-wrapper">

			<GridLayout rows="auto, *" class="main-grid">

				<!-- Header -->
				<StackLayout class="page-header">
					<GridLayout class="action-bar darker">
						<GridLayout class="action-wrap" (tap)="showSlideout($event)" columns="auto" horizontalAlignment="left">
							<Image stretch="none" class="icon-image" src="res://ic_menu"></Image>
						</GridLayout>
						<Label [text]="actionBarTitle" class="action-bar-title"></Label>
					</GridLayout>

					<GridLayout class="darker">
						<SegmentedBar selectedBackgroundColor="#fac950" [items]="confDayOptions" [(ngModel)]="selectedIndex"></SegmentedBar>
					</GridLayout>

					<Label [text]="dayHeader" class="page-title bold" horizontalAlignment="center" margin="15"></Label>

				</StackLayout>



				<!-- Sessions Views -->
				<GridLayout rows="auto, *" row="1">

					<!-- Search -->
					<SearchBar #searchBar [(ngModel)]="search" hint="Search" class="search" textFieldBackgroundColor="white"></SearchBar>

					<!-- List -->
					<ListView [items]="sessions | async" row="1" separatorColor="#fac950" (itemTap)="selectSession($event)" class="listView">
						<template let-item="item" let-i="index">
							<GridLayout columns="auto, *" (longpress)="longPressSession(item)" [class]="item.isBreak ? 'break-row' : 'list-view-row'">

								<GridLayout [visibility]="item.isBreak ? 'collapsed' : 'visible' " class="favourite-wrap" (tap)="toggleFavorite(item)" columns="auto"
									rows="auto">
									<Image id="imgFav" stretch="none" class="icon-image" [src]="item.favorite ? 'res://ic_add_to_fav_1' : 'res://ic_add_to_fav' "></Image>
								</GridLayout>

								<StackLayout col="1">
									<Label [text]="item.range" class="info-orange bold"></Label>
									<Label [text]="item.title" textWrap="true" class="info-bigger"></Label>
									<Label [visibility]="item.room ? 'visible' : 'collapsed' " [text]="item.room" class="info-orange"></Label>
								</StackLayout>

							</GridLayout>
						</template>
					</ListView>
				</GridLayout>


				<!-- Sponsors -->
				<StackLayout row="1" [visibility]="selectedViewIndex === 2 ? 'visible' : 'collapsed' " class="content-offset">

					<Image src="res://sponsor_logo_fdg" stretch="aspectFit"></Image>
					<Label class="info" textWrap="true" text="FDG - Global Provider of IT Services"></Label>
					<Image src="res://sponsor_logo_umer" stretch="aspectFit"></Image>
					<Label class="info" textWrap="true" text="UMER - Business Intelligence Experts"></Label>

				</StackLayout>

			</GridLayout>

			<GridLayout *ngIf="sessionPopupVisible" width="100%" height="100%" [visibility]="sessionPopupVisible ? 'visible' : 'collapsed' ">
				<StackLayout class="card modal" horizontalAlignment="center" verticalAlignment="center">
					<StackLayout class="inner">
						<Image stretch="none" class="icon-image" src="~/images/icon-40.png"></Image>

						<StackLayout class="">
							<!-- Content -->
							<ScrollView row="1" id="scroll">
								<GridLayout row="1" rows="auto, auto, auto, auto, *" columns="56, *" class="content">
									<!-- Description -->
									<Label #lblDesc class="description" textWrap="true" col="1" id="txtDescription" [text]="session.descriptionShort"></Label>

									<!-- Button -->
									<Button #btnDesc text="MORE" (tap)="toogleDescription()" class="more-button" row="1" col="1"></Button>

									<!-- Line -->
									<StackLayout class="horizontal-line" row="2" col="1" margin="0 0 0 0"></StackLayout>

									<!-- Speakers -->
									<Label text="SPEAKERS" class="section-header" row="3" col="1"></Label>

									<ListView id="sepakers-list" [items]="session.speakers" row="4" colSpan="2" height="{{ session.speakers.length * 72 + 46 }}"
										selectedBackgroundColor="#fac950" separatorColor="#FFFFFF">
										<template let-item="item">
											<GridLayout columns="56, *" class="speakers-row" (swipe)="backSwipe($event)">
												<Image [src]="item.picture" class="speaker-image" stretch="aspectFit" rowSpan="2"></Image>

												<StackLayout col="1">
													<StackLayout orientation="horizontal">
														<Label [text]="item.name" class="info bold"></Label>
														<Label [text]="item.twitterName ? ' (' + item.twitterName + ')' : '' " class="info" style="color: #A17201;"></Label>
													</StackLayout>

													<Label [text]="item.title" class="info" textWrap="true" style="font-style: italic;"></Label>
												</StackLayout>
											</GridLayout>
										</template>
									</ListView>
								</GridLayout>
							</ScrollView>
							<Button class="btn btn-primary" text="Close" (tap)="closeSessionPopup()"></Button>
						</StackLayout>
					</StackLayout>
				</StackLayout>
			</GridLayout>

		</AbsoluteLayout>

	</StackLayout>
</RadSideDrawer>